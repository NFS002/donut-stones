var e=Object.defineProperty;import{l as t,r as n,u as a,R as r,f as s,W as o,t as i,a as l,I as c,N as u,U as d,b as p,c as m,d as y,C as h,B as b,Q as f,e as w,g,h as v,T as x,i as k}from"./vendor.bea01f9d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];var T=[{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"},{internalType:"address payable",name:"_wallet",type:"address"},{internalType:"contract ERC20",name:"_token",type:"address"},{internalType:"address",name:"_tokenWallet",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"purchaser",type:"address"},{indexed:!0,internalType:"address",name:"beneficiary",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TokensPurchased",type:"event"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"}],name:"buyTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"rate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"remainingTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenWallet",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"wallet",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"weiRaised",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],N={warn:t.warn,debug:t.debug,info:t.info,error:t.error,trace:t.trace,setLevel:t.setLevel};function C({className:e,counterClockwise:t,dashRatio:a,pathRadius:r,strokeWidth:s,style:o}){return n.exports.createElement("path",{className:e,style:Object.assign({},o,S({pathRadius:r,dashRatio:a,counterClockwise:t})),d:M({pathRadius:r,counterClockwise:t}),strokeWidth:s,fillOpacity:0})}function M({pathRadius:e,counterClockwise:t}){const n=t?1:0;return`\n      M 50,50\n      m 0,-${e}\n      a ${e},${e} ${n} 1 1 0,${2*e}\n      a ${e},${e} ${n} 1 1 0,-${2*e}\n    `}function S({counterClockwise:e,dashRatio:t,pathRadius:n}){const a=2*Math.PI*n,r=(1-t)*a;return{strokeDasharray:`${a}px ${a}px`,strokeDashoffset:`${e?-r:r}px`}}class R extends n.exports.Component{getBackgroundPadding(){return this.props.background?this.props.backgroundPadding:0}getPathRadius(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()}getPathRatio(){const{value:e,minValue:t,maxValue:n}=this.props;return(Math.min(Math.max(e,t),n)-t)/(n-t)}render(){const{circleRatio:e,className:t,classes:a,counterClockwise:r,styles:s,strokeWidth:o,text:i}=this.props,l=this.getPathRadius(),c=this.getPathRatio();return n.exports.createElement("svg",{className:`${a.root} ${t}`,style:s.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?n.exports.createElement("circle",{className:a.background,style:s.background,cx:50,cy:50,r:50}):null,n.exports.createElement(C,{className:a.trail,counterClockwise:r,dashRatio:e,pathRadius:l,strokeWidth:o,style:s.trail}),n.exports.createElement(C,{className:a.innertrail,counterClockwise:r,dashRatio:e,pathRadius:l,strokeWidth:o,style:s.trail}),n.exports.createElement(C,{className:a.path,counterClockwise:r,dashRatio:c*e,pathRadius:l,strokeWidth:o,style:s.path}),i?n.exports.createElement("text",{className:a.text,style:s.text,x:50,y:50},i):null)}}var P;function $({rotation:e,strokeLinecap:t,textColor:n,textSize:a,pathColor:r,pathTransition:s,pathTransitionDuration:o,trailColor:i,backgroundColor:l}){const c=null==e?void 0:`rotate(${e}turn)`,u=null==e?void 0:"center center";return{root:{},path:F({stroke:r,strokeLinecap:t,transform:c,transformOrigin:u,transition:s,transitionDuration:null==o?void 0:`${o}s`}),trail:F({stroke:i,strokeLinecap:t,transform:c,transformOrigin:u}),text:F({fill:n,fontSize:a}),background:F({fill:l})}}function F(e){return Object.keys(e).forEach((t=>{null==e[t]&&delete e[t]})),e}((t,n,a)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a})(R,"symbol"!=typeof(P="defaultProps")?P+"":P,{background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",innertrail:"CircularProgressbar-trail CircularProgressbar-innertrail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""});const I=({tokenName:e,tokenSymbol:t,tokenAddress:n,crowdsaleAddress:c,tokensSoldPerc:u,tokenRate:d})=>{const{library:p,chainId:m,account:y}=a();var h=1,b=2573.54;const f=async function(){var e=document.getElementById("number-of-tokens-to-buy");e&&e.value&&(h=+e.value);const t=18,n=h*d.toNumber(),a=await s(n);await(async()=>{const e=await l.post("https://min-api.cryptocompare.com/data/price",{fsym:"ETH",tsyms:"GBP",sign:!0});b=e.data.GBP})();const r=(+a*b).toFixed(t),o=(+a).toFixed(t),i=n.toFixed(t);var c=document.getElementById("number-of-tokens-to-buy-values");if(c){var u=`\n      <p>= ${String(i).substring(0,t)} <span class="text-blue">Wei</span> </p>\n      <p>= ${String(o).substring(0,t)} <span class="text-blue">ETH</span> </p>\n      <p>≈ ${String(r).substring(0,t)} <span class="text-blue">GBP</span> </p>\n      `;c.innerHTML=u}};return f(),r.createElement(r.Fragment,null,r.createElement("div",{className:"card shadow-2xl main-card rounded"},r.createElement("div",{className:"card-body grid grid-rows-3 grid-cols-5"},r.createElement("div",{className:"row-span-1 col-span-4"},r.createElement("div",{className:"card-text col-span-4 row-span-1 text-grey text-lg"},r.createElement("p",null,"Donut Stones is an ERC20 cryptographic token created as the ",r.createElement("span",{className:"italic"},"antidote")," to the traditional economic mechanisms of distrubuting value. It was inspired by the growing popular research on the 'doughnut economy' by Kate Raworth that illlustrates many of the flaws in traditional economies that rely on perpertual growth, and is not only sustainable model but increasingly neglects maginalised portions of the population. The idea behind Donut Stones (⅊) is a secondary currency, to circulate alongside traditional fiat currencies such as GBP, but which the exchange is regulated, and which can only be ",r.createElement("span",{className:"italic"},"spent")," at a predefined subset of institutions that offer essential goods and services. If we imagine the distribution of wealth as a doughut shape whereby the most severe inequalities and the most basic human necessities are most concentrated at the center and excess wealth and environmental degrdationm marks the perimeter, then Donut Stones provide the inverse model, concentrated at the center of the doughut, and becoming increasingly scarce and more tightly regulated towards the perimeter. To show your support for the project, anyone may currently buy or exchange Donut Stones. Alternatively, you may formally request them by sending an email to email@domain.com, quoting your ethererum address, and amount you would like to request. Of course any words of support or feedback will aso be greatly appreciated, and I will aim to keep this page updated.",r.createElement("br",null),"If you are interested to find out more about the specificities of how this token may practically integrates into the modern economy, ",r.createElement("a",{id:"whitepaper-link",href:"https://dumacollective.com/404"},"you can read the whitepaper here.")))),r.createElement("div",{className:"card-side row-span-3 col-span-1"},r.createElement("div",{className:"divider divider-vertical"})),r.createElement("div",{className:"col-span-2 row-span-1"},r.createElement("div",{className:"circular-progress-bar-parent-wrapper"},r.createElement("div",{className:"card-bottom"},r.createElement("div",{className:"circular-progress-bar-wrapper"},r.createElement(R,{value:+u.toString().substring(0,1),text:`${u.toString().substring(0,1)}% sold`,strokeWidth:5,styles:$({textSize:"10px",strokeLinecap:"butt",pathColor:"#FFFFFF",textColor:"#FFFFFF"})}))),r.createElement("a",{id:"etherscan-link",className:"text-grey italic",href:`https://rinkeby.etherscan.io/token/${n}`,target:"_blank"},r.createElement("span",{className:"text-orange font-bold text-xl"},"ⓘ "),"View contract on Etherscan"))),r.createElement("div",{className:"col-span-2 row-span-1"},r.createElement("div",{className:"card-bottom-wrapper"},r.createElement("div",{className:"card-bottom"},r.createElement("div",{className:"text-lg"},r.createElement("p",{className:"pl-1 pb-1 text-grey"},"Buy Donut Stones ",r.createElement("span",{className:"text-2xl"},"⅊")),r.createElement("p",{className:"text-white pb-2"},"(Requires a ",r.createElement("span",{className:"text-orange"},"Metamask")," connection)")),r.createElement("div",null,r.createElement("input",{onChange:f,onLoad:f,id:"number-of-tokens-to-buy",type:"number",placeholder:"1",className:"input shadow-lg rounded-r-none text-grey"}),r.createElement("button",{id:"number-of-tokens-to-buy-btn",onClick:async()=>{const e=(p||new o(window.ethereum||"https://eth-rinkeby.alchemyapi.io/v2/jygflwgUGI3R3nTeuQK2bd3wLKcWxyHZ")).getSigner();try{if(!y)return void(await async function(){var e;if(null==(e=window.ethereum)?void 0:e.request)return window.ethereum.request({method:"eth_requestAccounts"});throw new Error("Please access https://metamask.io/ to install the Metamask extension on your browser")}());const t={to:c,value:d.mul(h)};console.warn(t);const n=await e.sendTransaction(t);i.promise(n.wait(),{loading:"Transaction submitted. Wait for confirmation...",success:r.createElement("b",null,"Transaction confirmed!"),error:r.createElement("b",null,"Transaction failed!.")})}catch(t){console.error(t)}},className:"absolute shadow-lg rounded-l-none btn"},"=>")),r.createElement("div",{id:"number-of-tokens-to-buy-values",className:"pt-3 text-xl text-white typed-text"},r.createElement("p",null," ",r.createElement("span",{className:"text-blue"})," "),r.createElement("p",null," ",r.createElement("span",{className:"text-blue"})," "),r.createElement("p",null," ",r.createElement("span",{className:"text-blue"})," "))))))))},L=new c({supportedChainIds:[1,3,4,5,42,56,88,89,97,137,1337,80001]});function A(){const{activate:e,active:t}=a(),[r,s]=n.exports.useState(!1);return n.exports.useEffect((()=>{L.isAuthorized().then((t=>{t?e(L,void 0,!0).catch((()=>{s(!0)})):s(!0)}))}),[]),n.exports.useEffect((()=>{!r&&t&&s(!0)}),[r,t]),r}function O(e=!1){const{active:t,error:r,activate:s}=a();n.exports.useEffect((()=>{const{ethereum:n}=window;if(n&&n.on&&!t&&!r&&!e){const e=()=>{N.warn("Handling 'connect' event"),s(L)},t=e=>{N.warn("Handling 'chainChanged' event with payload",e),s(L)},a=e=>{N.warn("Handling 'accountsChanged' event with payload",e),e.length>0&&s(L)},r=e=>{N.warn("Handling 'networkChanged' event with payload",e),s(L)};return n.on("connect",e),n.on("chainChanged",t),n.on("accountsChanged",a),n.on("networkChanged",r),()=>{n.removeListener&&(n.removeListener("connect",e),n.removeListener("chainChanged",t),n.removeListener("accountsChanged",a),n.removeListener("networkChanged",r))}}}),[t,r,e,s])}function W(){const e=a(),{connector:t,activate:n,deactivate:s,active:o,error:i}=e,[l,c]=r.useState();r.useEffect((()=>{l&&l===t&&c(void 0)}),[l,t]);O(!A()||!!l);const u=L===t;return r.createElement("div",{className:"flex flex-row w-full ml-4 mr-4"},u&&r.createElement("div",{className:"uppercase font-bold text-xl text-orange"},"Connected 🦊 ✅"),!u&&r.createElement("div",{id:"connect-btn",className:"uppercase font-bold text-xl p-2",onClick:()=>{c(L),n(L)}},"Connect  → 🦊"))}function B(){const{account:e}=a();return r.createElement("div",{className:"uppercase text-blue"},r.createElement("span",null,null===e?"-":e?` ${e.substring(0,6)}...`:""))}function D(){const{account:e,library:t,chainId:n}=a(),[o,i]=r.useState();return r.useEffect((()=>{if(e&&t){let n=!1;return t.getBalance(e).then((e=>{n||i(e)})).catch((()=>{n||i(null)})),()=>{n=!0,i(void 0)}}}),[e,t,n]),r.createElement("div",{className:"uppercase"},r.createElement("span",null,null===o?"Error":o?`Ξ${s(o).substring(0,6)}`:""))}function q(e){const t=new o(e);return t.pollingInterval=12e3,t}function H(){const e=a(),{connector:t,activate:n,deactivate:s,active:o,error:i}=e,[l,c]=r.useState();r.useEffect((()=>{l&&l===t&&c(void 0)}),[l,t]);return O(!A()||!!l),r.createElement("div",{id:"account-info",className:"mb-2 shadow-lg navbar rounded"},r.createElement("div",{className:"flex-1 px-2 mx-2"},r.createElement("div",{className:"flex flex-row w-full ml-4 mr-4"},r.createElement(W,null),r.createElement("div",null,!!i&&r.createElement("h4",{style:{marginTop:"1rem",marginBottom:"0"}},function(e){return e instanceof u?"No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.":e instanceof d?"You're connected to an unsupported network.":e instanceof p||e instanceof m?"Please authorize this website to access your Ethereum account.":(N.error(e),"An unknown error occurred. Check the console for more details.")}(i))))),r.createElement("div",{className:"flex-none hidden px-2 mx-2 lg:flex"},r.createElement("div",{className:"flex items-stretch"},r.createElement(B,null),r.createElement(D,null))))}const j="https://eth-rinkeby.alchemyapi.io/v2/jygflwgUGI3R3nTeuQK2bd3wLKcWxyHZ",V=({crowdsaleAddress:e})=>{const{library:t,chainId:s,account:i}=a(),[l,c]=n.exports.useState(""),[u,d]=n.exports.useState("0"),[p,m]=n.exports.useState("0");n.exports.useState(1),n.exports.useEffect((()=>{try{(()=>{N.warn("fetchCrowdsaleTokenInfo");const n=t||new o(window.ethereum||j),a=new h(e,T,n);a.token().then(c).catch(N.error),a.remainingTokens().then((e=>d(b.from(e).toString()))).catch(N.error),a.rate().then((e=>m(b.from(e).toString()))).catch(N.error)})()}catch(n){N.error(n)}}),[t]);const{error:f,isLoading:w,data:g}=y(["token-info",l],(async()=>{N.warn("fetchTokenInfo");const n=t||new o(window.ethereum||j),a=new h(l,E,n),r=new h(e,T,n),s=await a.name(),i=await a.symbol(),c=await a.decimals(),u=await a.totalSupply(),d=await r.remainingTokens(),p=await r.rate(),m=u.sub(d);return N.warn("token info",{name:s,symbol:i,decimals:c,totalSupply:u,remainingTokens:d,tokensSoldPerc:m}),{name:s,symbol:i,decimals:c,totalSupply:u,tokenRate:p,tokensSoldPerc:m}}),{enabled:""!==l});return g?r.createElement(r.Fragment,null,r.createElement(H,null),r.createElement(I,{tokenName:g.name,tokenSymbol:g.symbol,tokenAddress:l,crowdsaleAddress:e,tokensSoldPerc:g.tokensSoldPerc,tokenRate:g.tokenRate})):w?r.createElement("div",null,"loading..."):r.createElement("div",null,"failed to load: ",f," ")};const G=new f;function K(){return r.createElement(w,{getLibrary:q},r.createElement(g,{client:G},r.createElement("div",{className:"container"},r.createElement("div",{className:"App pt-6 shadow-xl"},r.createElement(V,{crowdsaleAddress:"0x9244D4AC8ea8Ab5084a0E0279F77Fb42F41fCc5e"}))),r.createElement(v.exports.ReactQueryDevtools,{initialIsOpen:!1}),r.createElement(x,{position:"top-center"})))}k.render(r.createElement(r.StrictMode,null,r.createElement(K,null)),document.getElementById("root"));
